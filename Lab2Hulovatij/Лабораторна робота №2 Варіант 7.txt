======== Computer.java ========
package група.прізвище.lab2;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

/**
 * Клас Computer представляє комп'ютерну систему з можливістю керування основними компонентами, такими як CPU, RAM та жорсткий диск.
 * Включає можливість запуску/зупинки комп'ютера, оновлення RAM і жорсткого диска, встановлення програм, перевірки здоров'я системи та інше.
 */
public class Computer {
    private CPU cpu;
    private RAM ram;
    private HardDrive hardDrive;
    private Logger logger;
    private boolean isOn;
    private int temperature;
    private boolean overclocked;
    private List<String> runningPrograms;

    /**
     * Конструктор для створення комп'ютера з початковим станом включення.
     * @param isOn Початковий стан комп'ютера (включений/вимкнений)
     * @throws IOException Якщо виникає помилка під час створення лог-файлу
     */
    public Computer(boolean isOn) throws IOException {
        this.isOn = isOn;
        this.cpu = new CPU("Intel i7", 3.1, 4);
        this.ram = new RAM(32);
        this.hardDrive = new HardDrive();
        this.temperature = 40;
        this.overclocked = false;
        this.runningPrograms = new ArrayList<>();

        this.logger = new Logger("computer_log.txt");

        logger.log(String.format("Комп'ютер %s створено.", this.toString()));
    }

    /**
     * Конструктор для створення комп'ютера з визначеними компонентами та станом включення.
     * @param cpu Процесор комп'ютера
     * @param ram Оперативна пам'ять комп'ютера
     * @param hardDrive Жорсткий диск комп'ютера
     * @param isOn Початковий стан комп'ютера (включений/вимкнений)
     * @throws IOException Якщо виникає помилка під час створення лог-файлу
     */
    public Computer(CPU cpu, RAM ram, HardDrive hardDrive, boolean isOn) throws IOException {
        this.cpu = cpu;
        this.ram = ram;
        this.hardDrive = hardDrive;
        this.isOn = isOn;
        this.temperature = 40;
        this.overclocked = false;
        this.runningPrograms = new ArrayList<>();

        this.logger = new Logger("computer_log.txt");

        logger.log(String.format("Комп'ютер %s створено.", this.toString()));
    }

    /**
     * Включає комп'ютер.
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public void startComputer() throws IOException {
        isOn = true;

        logger.log("Комп'ютер запущено");
        System.out.println("Комп'ютер запущено");
    }

    /**
     * Вимикає комп'ютер.
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public void stopComputer() throws IOException {
        isOn = false;

        logger.log("Комп'ютер зупинено");
        System.out.println("Комп'ютер зупинено");
    }

    /**
     * Оновлює обсяг оперативної пам'яті (RAM).
     * @param capacity Новий обсяг оперативної пам'яті
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public void updateRAM(int capacity) throws IOException {
        ram.addCapacity(capacity);

        logger.log(String.format("Оновлено RAM до %s", ram.getCapacity()));
        System.out.printf("Оновлено RAM до %s\n", ram.getCapacity());
    }

    /**
     * Отримує модель процесора.
     * @return Модель процесора
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public String modelOfCPU() throws IOException {
        String model = cpu.getModel();

        logger.log(String.format("Модель CPU: %s", model));
        System.out.printf("Модель CPU: %s\n", model);
        return model;
    }

    /**
     * Оновлює обсяг вільного місця на жорсткому диску.
     * @param capacity Обсяг вільного місця на жорсткому диску
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public void updateHardDrive(int capacity) throws IOException {
        if (hardDrive.getFreeSpace() == capacity) hardDrive.setCapacity(capacity);

        logger.log(String.format("Місце на жорсткому диску збільшено на %s", capacity));
        System.out.printf("Місце на жорсткому диску збільшено на %s", capacity);
    }

    /**
     * Встановлює програму на жорсткий диск.
     * @param softwareName Назва програмного забезпечення
     * @param sizeInMB Розмір програми в мегабайтах
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public void installSoftware(String softwareName, int sizeInMB) throws IOException {
        if (isOn) {
            if (hardDrive.getFreeSpace() >= sizeInMB) {
                hardDrive.setFreeSpace(hardDrive.getFreeSpace() - sizeInMB);
                runningPrograms.add(softwareName);
                logger.log("Встановлено програму: " + softwareName + ". Розмір: " + sizeInMB + " MB");
                System.out.println("Встановлено програму: " + softwareName);
            } else {
                logger.log("Недостатньо місця для встановлення " + softwareName);
                System.out.println("Недостатньо місця для встановлення " + softwareName);
            }
        } else {
            logger.log("Неможливо встановити програму. Комп'ютер вимкнено");
            System.out.println("Неможливо встановити програму. Комп'ютер вимкнено");
        }
    }

    /**
     * Запускає стрес-тест, підвищуючи температуру комп'ютера.
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public void runStressTest() throws IOException {
        if (isOn) {
            temperature += 20;
            logger.log("Запущено стрес-тест. Температура підвищилась до " + temperature + "°C");
            System.out.println("Запущено стрес-тест");
            if (temperature > 90) {
                logger.log("УВАГА: Висока температура!");
                System.out.println("УВАГА: Висока температура!");
            }
        } else {
            logger.log("Неможливо запустити стрес-тест. Комп'ютер вимкнено");
            System.out.println("Неможливо запустити стрес-тест. Комп'ютер вимкнено");
        }
    }

    /**
     * Перевіряє здоров'я системи та виводить його рівень.
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public void checkSystemHealth() throws IOException {
        if (isOn) {
            int health = 100;
            if (temperature > 80) health -= 20;
            if (overclocked) health -= 10;
            if (hardDrive.getFreeSpace() < 1000) health -= 15;

            logger.log("Перевірка здоров'я системи: " + health + "%");
            System.out.println("Здоров'я системи: " + health + "%");

            if (health < 50) {
                logger.log("УВАГА: Рекомендується обслуговування системи");
                System.out.println("УВАГА: Рекомендується обслуговування системи");
            }
        } else {
            logger.log("Неможливо перевірити здоров'я системи. Комп'ютер вимкнено");
            System.out.println("Неможливо перевірити здоров'я системи. Комп'ютер вимкнено");
        }
    }

    /**
     * Закриває запущену програму і звільняє RAM.
     * @param programName Назва програми
     * @param ramUsage Використання RAM в мегабайтах
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public void closeProgram(String programName, int ramUsage) throws IOException {
        if (isOn && runningPrograms.contains(programName)) {
            runningPrograms.remove(programName);
            ram.setCapacity(ram.getCapacity() - ramUsage);
            logger.log("Закрито програму: " + programName + ". Звільнено RAM: " + ramUsage + " MB");
            System.out.println("Закрито програму: " + programName);

            temperature -= 1;
            if (temperature < 0) temperature = 0;
        } else {
            logger.log("Неможливо закрити програму " + programName + ". Програма не запущена або комп'ютер вимкнено");
            System.out.println("Неможливо закрити програму " + programName);
        }
    }

    /**
     * Виводить список запущених програм.
     * @throws IOException Якщо виникає помилка під час запису до лог-файлу
     */
    public void listRunningPrograms() throws IOException {
        if (isOn) {
            logger.log("Список запущених програм: " + String.join(", ", runningPrograms));
            System.out.println("Запущені програми: " + String.join(", ", runningPrograms));
        } else {
            logger.log("Неможливо отримати список програм. Комп'ютер вимкнено");
            System.out.println("Неможливо отримати список програм. Комп'ютер вимкнено");
        }
    }

    /**
     * Метод для закриття логера.
     * @throws IOException якщо виникає помилка під час закриття логера.
     */
    public void closeLogger() throws IOException {
        logger.close();
    }
}

======== ComputerDriver.java ========
package група.прізвище.lab2;

import java.io.IOException;

/**
 * Головний клас для запуску і тестування функціональності комп'ютера.
 * Містить метод main, який демонструє використання класу Computer.
 */
public class ComputerDriver {
    /**
     * Основний метод програми. Виконує симуляцію керування комп'ютерп.
     * @param args аргументи командного рядка
     */
    public static void main(String[] args) {
        try {
            // Створює новий об'єкт комп'ютера з початковим станом "увімкнуто".
            Computer computer = new Computer(true);

            computer.startComputer();
            computer.updateRAM(2);
            computer.modelOfCPU();
            computer.updateHardDrive(100);
            computer.installSoftware("GoogleChrome", 500);
            computer.runStressTest();
            computer.checkSystemHealth();
            computer.listRunningPrograms();
            computer.closeProgram("GoogleChrome", 500);
            computer.stopComputer();

            computer.closeLogger();
        } catch (IOException e) {
            // Обробка помилок, що виникають під час запису в файл.
            throw new RuntimeException("Сталася помилка при записі в файл: " + e.getMessage());
        }
    }
}

======== CPU.java ========
package група.прізвище.lab2;

/**
 * Клас CPU представляє процесор комп'ютера. Він включає інформацію про модель процесора, частоту його роботи та кількість ядер.
 */
public class CPU {
    private String model;
    private double frequency;
    private int cores;

    /**
     * Конструктор для створення об'єкта CPU з вказаною моделлю, частотою і кількістю ядер.
     * @param model Модель процесора
     * @param frequency Частота процесора в ГГц
     * @param cores Кількість ядер процесора
     */
    public CPU(String model, double frequency, int cores) {
        this.model = model;
        this.frequency = frequency;
        this.cores = cores;
    }

    /**
     * Отримує модель процесора.
     * @return Модель процесора
     */
    public String getModel() {
        return model;
    }

    /**
     * Встановлює модель процесора.
     * @param model Модель процесора
     */
    public void setModel(String model) {
        this.model = model;
    }

    /**
     * Отримує частоту процесора.
     * @return Частота процесора в ГГц
     */
    public double getFrequency() {
        return frequency;
    }

    /**
     * Встановлює частоту процесора.
     * @param frequency Частота процесора в ГГц
     */
    public void setFrequency(double frequency) {
        this.frequency = frequency;
    }

    /**
     * Отримує кількість ядер процесора.
     * @return Кількість ядер процесора
     */
    public int getCores() {
        return cores;
    }

    /**
     * Встановлює кількість ядер процесора.
     * @param cores Кількість ядер процесора
     */
    public void setCores(int cores) {
        this.cores = cores;
    }
}

======== HardDrive.java ========
package група.прізвище.lab2;

/**
 * Клас HardDrive представляє жорсткий диск комп'ютера. Він включає інформацію про загальну місткість диска та доступний вільний простір.
 */
public class HardDrive {
    private int capacity;
    private int freeSpace;

    /**
     * Конструктор за замовчуванням для створення жорсткого диска з початковою місткістю 1000 ГБ і 500 ГБ вільного простору.
     */
    public HardDrive() {
        this(1000, 500);
    }

    /**
     * Конструктор для створення об'єкта HardDrive з вказаною місткістю та вільним простором.
     * @param capacity Загальна місткість жорсткого диска в ГБ
     * @param freeSpace Вільний простір на жорсткому диску в ГБ
     */
    public HardDrive(int capacity, int freeSpace) {
        this.capacity = capacity;
        this.freeSpace = freeSpace;
    }

    /**
     * Отримує загальну місткість жорсткого диска.
     * @return Загальна місткість жорсткого диска в ГБ
     */
    public int getCapacity() {
        return capacity;
    }

    /**
     * Встановлює загальну місткість жорсткого диска.
     * @param capacity Загальна місткість жорсткого диска в ГБ
     */
    public void setCapacity(int capacity) {
        this.capacity = capacity;
    }

    /**
     * Отримує вільний простір на жорсткому диску.
     * @return Вільний простір на жорсткому диску в ГБ
     */
    public int getFreeSpace() {
        return freeSpace;
    }

    /**
     * Встановлює вільний простір на жорсткому диску.
     * @param freeSpace Вільний простір на жорсткому диску в ГБ
     */
    public void setFreeSpace(int freeSpace) {
        this.freeSpace = freeSpace;
    }
}

======== Logger.java ========
package група.прізвище.lab2;

import java.io.FileWriter;
import java.io.IOException;

/**
 * Клас Logger забезпечує логування повідомлень у файл.
 * Використовується для запису дій та подій, що відбуваються в програмі.
 */
public class Logger {
    private FileWriter fileWriter;

    /**
     * Конструктор створює об'єкт Logger для запису повідомлень у вказаний файл.
     *
     * @param fileName ім'я файлу для запису логів.
     * @throws IOException якщо виникає помилка при створенні або відкритті файлу.
     */
    public Logger(String fileName) throws IOException {
        fileWriter = new FileWriter(fileName, true);
    }

    /**
     * Метод записує повідомлення у файл логу.
     *
     * @param message повідомлення, яке потрібно записати у файл.
     * @throws IOException якщо виникає помилка при записі у файл.
     */
    public void log(String message) throws IOException {
        if (fileWriter != null) {
            fileWriter.write(message + "\n");
            fileWriter.flush();
        }
    }

    /**
     * Метод закриває файл логу, звільняючи всі ресурси, пов'язані з ним.
     * У разі виникнення помилки при закритті, повідомлення про помилку буде виведено в консоль.
     */
    public void close() {
        if (fileWriter != null) {
            try {
                fileWriter.close();
            } catch (IOException e) {
                System.err.println("Виникла помилка при закриванні файла: " + e.getMessage());
            }
        }
    }
}

======== RAM.java ========
package група.прізвище.lab2;

/**
 * Клас RAM представляє оперативну пам'ять комп'ютера. Він включає інформацію про загальну місткість пам'яті та можливість її збільшення.
 */
public class RAM {
    private int capacity;

    /**
     * Конструктор за замовчуванням для створення оперативної пам'яті з початковою місткістю 8 ГБ.
     */
    public RAM() {
        this(8);
    }

    /**
     * Конструктор для створення об'єкта RAM з вказаною місткістю.
     * @param capacity Місткість оперативної пам'яті в ГБ
     */
    public RAM(int capacity) {
        this.capacity = capacity;
    }

    /**
     * Додає вказану кількість до загальної місткості оперативної пам'яті.
     * @param amount Кількість пам'яті, яку потрібно додати (в ГБ)
     */
    public void addCapacity(int amount) {
        this.capacity += amount;
    }

    /**
     * Отримує загальну місткість оперативної пам'яті.
     * @return Місткість оперативної пам'яті в ГБ
     */
    public int getCapacity() {
        return capacity;
    }

    /**
     * Встановлює нову місткість оперативної пам'яті.
     * @param capacity Місткість оперативної пам'яті в ГБ
     */
    public void setCapacity(int capacity) {
        this.capacity = capacity;
    }
}

